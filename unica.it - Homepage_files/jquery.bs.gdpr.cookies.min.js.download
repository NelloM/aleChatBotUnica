/*
 Name: Bootstrap GDPR Cookies
 Description: jQuery based plugin that shows bootstrap modal with cookie info
 Version: v1.0

 Copyright (c) 2018 Aleksander Wo≈∫nica
 Licensed under the MIT license: http://www.opensource.org/licenses/mit-license.php
 Inspired by: https://github.com/ketanmistry/ihavecookies
 Cookies Create/Read/Delete from https://www.quirksmode.org/js/cookies.html
*/
(function(b){function l(c){c="#"+c;b(c).modal("hide");b(c).on("hidden.bs.modal",function(e){b(this).modal("hide");b(c).remove()})}function g(b,e,f){if(f){var c=new Date;c.setTime(c.getTime()+864E5*f);f="; expires="+c.toGMTString()}else f="";document.cookie=b+"="+e+f+"; path=/";e=Math.floor(1E7*Math.random());b=Date.now();e=e+"/"+b;console.log("ID univoco: "+e);document.cookie="CookieDate="+b+";expires="+f+";";document.cookie="CookieID="+e+";expires="+f+";"}function m(b){b+="=";for(var c=document.cookie.split(";"),
f=0;f<c.length;f++){for(var d=c[f];" "==d.charAt(0);)d=d.substring(1,d.length);if(0==d.indexOf(b))return d.substring(b.length,d.length)}return null}b.fn.bsgdprcookies=function(c,e){var f=b(this),d=m("CookieShow"),k=m("CookiePreferences"),a=b.extend({id:"bs-gdpr-cookies-modal",class:"",title:"Cookies & Privacy Policy",backdrop:"static",message:"Your cookie message...",messageScrollBar:!1,messageMaxHeightPercent:25,delay:1500,expireDays:30,moreLinkActive:!0,moreLinkLabel:"More informations..",moreLinkNewTab:!0,
moreLink:"privacy-policy.php",acceptButtonLabel:"Accept",declineButtonLabel:"Decline",allowAdvancedOptions:!1,advancedTitle:"Select which cookies you want to accept",advancedAutoOpenDelay:1E3,advancedButtonLabel:"Customize",advancedCookiesToSelect:[{name:"necessary",title:"Necessary",description:"Required for the site to work properly",isFixed:!0},{name:"preferences",title:"Site Preferences",description:"Required for saving your site preferences, e.g. remembering your username etc.",isFixed:!1},{name:"analytics",
title:"Analytics",description:"Required to collect site visits, browser types, etc.",isFixed:!1},{name:"marketing",title:"Marketing",description:"Required to marketing, e.g. newsletters, social media, etc",isFixed:!1}],OnAccept:function(){},OnDecline:function(){}},c);if(d&&k&&"reinit"!=e)k=!0,"false"==d&&(k=!1),g("CookieShow",k,a.expireDays),l(a.id);else{l(a.id);var h="";h=c=d="";1==a.moreLinkActive&&(h=1==a.moreLinkNewTab?'<a href="'+a.moreLink+'" target="_blank" rel="noopener noreferrer" id="'+
a.id+'-more-link">'+a.moreLinkLabel+"</a>":'<a href="'+a.moreLink+'" id="'+a.id+'-more-link">'+a.moreLinkLabel+"</a>");if(!0===a.allowAdvancedOptions){d='<button id="'+a.id+'-advanced-btn" type="button" class="btn btn-secondary">'+a.advancedButtonLabel+'</button><button id="'+a.id+'-accept-btn" type="button" class="btn btn-primary" data-dismiss="modal">'+a.acceptButtonLabel+'</button><button id="'+a.id+'-decline-btn" type="button" class="btn btn-primary" data-dismiss="modal">'+a.declineButtonLabel+
"</button>";var n="";preferences=JSON.parse(k);b.each(a.advancedCookiesToSelect,function(b,c){if(""!==c.name&&""!==c.title){b="";1==c.isFixed&&(b=' checked="checked" disabled="disabled"');var d="";!1!==c.description&&(d=' title="'+c.description+'"');var e=a.id+"-option-"+c.name;n+='<input type="checkbox" id="'+e+'" name="bsgdpr[]" value="'+c.name+'" data-auto="on" '+b+'> <label name="bsgdpr[]" data-toggle="tooltip" data-placement="right" for="'+e+'"'+d+">"+c.title+"</label><br />"}});h='<div id="'+
a.id+'-message">'+a.message+h+'</div><div id="'+a.id+'-advanced-types" style="display:none; margin-top: 10px;"><h5 id="'+a.id+'-advanced-title">'+a.advancedTitle+"</h5>"+n+"</div>"}else d='<button id="'+a.id+'-accept-btn" type="button" class="btn btn-primary" data-dismiss="modal">'+a.acceptButtonLabel+'</button><button id="'+a.id+'-decline-btn" type="button" class="btn btn-primary" data-dismiss="modal">'+a.declineButtonLabel+"</button>",h='<div id="'+a.id+'-message">'+a.message+h+"</div>";1==a.messageScrollBar&&
(c='style="overflow-y: scroll; max-height: '+a.messageMaxHeightPercent+'%"');var p='<div class="modal fade '+a.class+'" id="'+a.id+'" tabindex="-1" role="dialog" aria-labelledby="'+a.id+'-title" aria-hidden="true"><div class="modal-dialog modal-dialog-centered" role="document"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h4 class="modal-title" id="'+a.id+'-title">'+
a.title+'</h4></div><div id="'+a.id+'-body" class="modal-body" '+c+">"+h+'</div><div class="modal-footer">'+d+"</div></div></div></div>";setTimeout(function(){b(f).append(p);b("#"+a.id).modal({keyboard:!1,backdrop:a.backdrop});"reinit"===e&&!0===a.allowAdvancedOptions&&setTimeout(function(){b("#"+a.id+"-advanced-btn").trigger("click");b.each(preferences,function(c,d){b("#"+a.id+"-option-"+d).prop("checked",!0)})},a.advancedAutoOpenDelay)},a.delay);b("body").on("click","#"+a.id+"-accept-btn",function(){g("CookieShow",
!0,a.expireDays);l(a.id);b('input[name="bsgdpr[]"][data-auto="on"]').prop("checked",!0);g("CookiePreferences","",-1);var c=[];b.each(b('input[name="bsgdpr[]"]').serializeArray(),function(a,b){c.push(b.value)});g("CookiePreferences",JSON.stringify(c),365);a.OnAccept.call(this)});b("body").on("click","#"+a.id+"-decline-btn",function(){g("CookieShow",!0,a.expireDays);l(a.id);g("CookiePreferences","",-1);g("CookiePreferences",JSON.stringify([]),365);a.OnDecline.call(this)});b("body").on("click","#"+a.id+
"-advanced-btn",function(){b('input[name="bsgdpr[]"]:not(:disabled)').attr("data-auto","off").prop("checked",!1);b('label[name="bsgdpr[]"]').tooltip({offset:"0, 10"});b("#"+a.id+"-advanced-types").slideDown("fast",function(){b("#"+a.id+"-advanced-btn").prop("disabled",!0)});1==a.messageScrollBar&&setTimeout(function(){bodyID=a.id+"-body";var c=document.getElementById(bodyID);b("#"+bodyID).animate({scrollTop:c.scrollHeight-c.clientHeight},800)},500)})}};b.fn.bsgdprcookies.GetUserPreferences=function(){var b=
m("CookiePreferences");return JSON.parse(b)};b.fn.bsgdprcookies.PreferenceExists=function(c){var e=b.fn.bsgdprcookies.GetUserPreferences();return!1===m("CookieShow")||!1===e||-1===e.indexOf(c)?!1:!0}})(jQuery);